!function(e){"function"==typeof define&&define.amd?define(["jquery","jquery-ui-dist"],e):e(jQuery)}(function(e){e.extend(e.ui,{multiDatesPicker:{version:"1.6.8"}}),e.fn.multiDatesPicker=function(t){var a=arguments,i=this,s={};function r(e,t){t||(t="picked"),e=o.call(this,e);for(var a=0;a<this.multiDatesPicker.dates[t].length;a++)if(!d.compareDates(this.multiDatesPicker.dates[t][a],e))return this.multiDatesPicker.dates[t].splice(a,1).pop()}function l(e,t){return t||(t="picked"),this.multiDatesPicker.dates[t].splice(e,1).pop()}function c(e,t,a){t||(t="picked"),(e=o.call(this,e)).setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),!1!==d.gotDate.call(this,e,t)||(this.multiDatesPicker.dates[t].push(e),a||this.multiDatesPicker.dates[t].sort(d.compareDates))}function n(e){e||(e="picked"),this.multiDatesPicker.dates[e].sort(d.compareDates)}function o(e,t,a){return t||(t="object"),d.dateConvert.call(this,e,t,a)}var d={init:function(t){var a=e(this);if(this.multiDatesPicker.changed=!1,t&&"enableSelectedDates"===t.mode&&(this.multiDatesPicker.mode="enableSelectedDates",this.multiDatesPicker.selectedDates=[],e("#mdp-styles").length||e('<style id="mdp-styles">').prop("type","text/css").html(`
								.date-enabled {
									background: #e6ffe6 !important;
									border: 1px solid #99ff99 !important;
								}
								.enable-dates-controls {
									margin-top: 10px;
									margin-bottom: 10px;
								}
								.enable-dates-controls button {
									margin-right: 10px;
									padding: 5px 10px;
									cursor: pointer;
								}
							`).appendTo("head"),t.showEnableResetBtns&&d.addControls.call(this)),a.val())var i=a.val();t?(t.separator&&(this.multiDatesPicker.separator=t.separator),this.multiDatesPicker.separator||(this.multiDatesPicker.separator=", "),this.multiDatesPicker.originalBeforeShow=t.beforeShow,this.multiDatesPicker.originalOnSelect=t.onSelect,this.multiDatesPicker.originalBeforeShowDay=t.beforeShowDay,this.multiDatesPicker.originalOnClose=t.onClose,a.datepicker(t),this.multiDatesPicker.minDate=e.datepicker._determineDate(this,t.minDate,null),this.multiDatesPicker.maxDate=e.datepicker._determineDate(this,t.maxDate,null),t.addDates&&d.addDates.call(this,t.addDates),t.addDisabledDates&&d.addDates.call(this,t.addDisabledDates,"disabled"),d.setMode.call(this,t)):a.datepicker(),a.datepicker("option",{beforeShow:function(e,t){if(this.multiDatesPicker.changed=!1,this.multiDatesPicker.originalBeforeShow)return this.multiDatesPicker.originalBeforeShow.call(this,e,t)},onSelect:function(t,a){var i=e(this);if(this.multiDatesPicker.changed=!0,t&&(i.multiDatesPicker("toggleDate",t),this.multiDatesPicker.changed=!0),"normal"==this.multiDatesPicker.mode&&this.multiDatesPicker.pickableRange){if(this.multiDatesPicker.dates.picked.length>0){var s=this.multiDatesPicker.dates.picked[0],r=new Date(s.getTime());if(d.sumDays(r,this.multiDatesPicker.pickableRange-1),this.multiDatesPicker.adjustRangeToDisabled){var l,c=this.multiDatesPicker.dates.disabled.slice(0);do{l=0;for(var n=0;n<c.length;n++)c[n].getTime()<=r.getTime()&&(s.getTime()<=c[n].getTime()&&c[n].getTime()<=r.getTime()&&l++,c.splice(n,1),n--);r.setDate(r.getDate()+l)}while(0!=l)}this.multiDatesPicker.maxDate&&r>this.multiDatesPicker.maxDate&&(r=this.multiDatesPicker.maxDate),i.datepicker("option","minDate",s).datepicker("option","maxDate",r)}else i.datepicker("option","minDate",this.multiDatesPicker.minDate).datepicker("option","maxDate",this.multiDatesPicker.maxDate)}this.multiDatesPicker.originalOnSelect&&t&&this.multiDatesPicker.originalOnSelect.call(this,t,a)},beforeShowDay:function(t){var a=e(this),i=!1!==a.multiDatesPicker("gotDate",t),s=a.datepicker("option","disabled"),r=!1!==a.multiDatesPicker("gotDate",t,"disabled"),l=this.multiDatesPicker.maxPicks<=this.multiDatesPicker.dates.picked.length,c=[!0,"",null];return this.multiDatesPicker.originalBeforeShowDay&&(c=this.multiDatesPicker.originalBeforeShowDay.call(this,t)),c[1]=i?"ui-state-highlight "+c[1]:c[1],c[0]=c[0]&&!(s||r||l&&!c[1]),c}}),i&&a.multiDatesPicker("value",i);var s=a.multiDatesPicker("value");a.val(s);var r=a.datepicker("option","altField");r&&e(r).val(s),a.datepicker("refresh")},enableSelectedDates:function(){if("enableSelectedDates"===this.multiDatesPicker.mode){var t=e(this),a=t.datepicker("getDate")||new Date,i=a.getFullYear(),s=a.getMonth();d.resetDates.call(this,"disabled");for(var r=[],l=new Date(i,s+1,0).getDate(),c=1;c<=l;c++){var n=new Date(i,s,c),o=e.datepicker.formatDate("yy-mm-dd",n);this.multiDatesPicker.selectedDates.includes(o)||r.push(n)}r.length&&d.addDates.call(this,r,"disabled"),t.datepicker("refresh")}},addControls:function(){var t=e(this),a=e('<div class="enable-dates-controls"></div>'),i=e('<button type="button" id="enableSelected">Enable selected dates</button>');i.on("click",function(e){e.preventDefault(),d.enableSelectedDates.call(t[0])});var s=e('<button type="button" id="resetDates">Reset</button>');s.on("click",function(a){a.preventDefault(),t[0].multiDatesPicker.selectedDates=[],d.resetDates.call(t[0],"disabled"),d.resetDates.call(t[0],"picked"),e(".ui-datepicker-calendar td").removeClass("date-enabled").removeClass("ui-state-highlight"),t.datepicker("refresh")}),a.append(i).append(s),t.after(a)},compareDates:function(e,t){e=o.call(this,e),t=o.call(this,t);var a=e.getFullYear()-t.getFullYear();return a||(a=e.getMonth()-t.getMonth())||(a=e.getDate()-t.getDate()),a},sumDays:function(e,t){return(obj_date=o.call(this,e)).setDate(obj_date.getDate()+t),o.call(this,obj_date,typeof e)},dateConvert:function(t,a,i){var s=typeof t,r=e(this);if(s==a){if("object"==s)try{t.getTime()}catch(l){return e.error("Received date is in a non supported format!"),!1}return t}if(void 0===t&&(t=new Date(0)),"string"!=a&&"object"!=a&&"number"!=a&&e.error('Date format "'+a+'" not supported!'),!i){var c=r.datepicker("option","dateFormat");i=c||e.datepicker._defaults.dateFormat}switch(s){case"object":break;case"string":t=e.datepicker.parseDate(i,t);break;case"number":t=new Date(t);break;default:e.error('Conversion from "'+s+'" format not allowed on jQuery.multiDatesPicker')}switch(a){case"object":return t;case"string":return e.datepicker.formatDate(i,t);case"number":return t.getTime();default:return e.error('Conversion to "'+a+'" format not allowed on jQuery.multiDatesPicker')}},gotDate:function(e,t){t||(t="picked");for(var a=0;a<this.multiDatesPicker.dates[t].length;a++)if(0===d.compareDates.call(this,this.multiDatesPicker.dates[t][a],e))return a;return!1},value:function(e){if(e&&"string"==typeof e)d.addDates.call(this,e.split(this.multiDatesPicker.separator));else{var t=d.getDates.call(this,"string");return t.length?t.join(this.multiDatesPicker.separator):""}},getDates:function(t,a){switch(t||(t="string"),a||(a="picked"),t){case"object":return this.multiDatesPicker.dates[a];case"string":case"number":for(var i=[],s=0;s<this.multiDatesPicker.dates[a].length;s++)i.push(o.call(this,this.multiDatesPicker.dates[a][s],t));return i;default:e.error('Format "'+t+'" not supported!')}},addDates:function(t,a){if(!t.length)return e.error("Empty array of dates received.");switch(a||(a="picked"),typeof t){case"object":case"array":for(var i=0;i<t.length;i++)c.call(this,t[i],a,!0);return n.call(this,a);default:return c.call(this,t,a)}},removeDates:function(e,t){t||(t="picked");var a=[];if("[object Array]"===Object.prototype.toString.call(e)){e.sort(function(e,t){return t-e});for(var i=0;i<e.length;i++)a.push(r.call(this,e[i],t))}else a.push(r.call(this,e,t));return a},removeIndexes:function(e,t){t||(t="picked");var a=[];if("[object Array]"===Object.prototype.toString.call(e)){e.sort(function(e,t){return t-e});for(var i=0;i<e.length;i++)a.push(l.call(this,e[i],t))}else a.push(l.call(this,e,t));return a},resetDates:function(e){e||(e="picked"),this.multiDatesPicker.dates[e]=[]},toggleDate:function(t,a){switch(a||(a="picked"),this.multiDatesPicker.mode){case"enableSelectedDates":e(this);var i=o.call(this,t),s=e.datepicker.formatDate("yy-mm-dd",i),r=this.multiDatesPicker.selectedDates.indexOf(s);-1===r?(this.multiDatesPicker.selectedDates.push(s),e(".ui-datepicker-calendar").find('td[data-date="'+i.getDate()+'"]').addClass("date-enabled"),d.addDates.call(this,i,a),this.multiDatesPicker.enableButtonClicked&&d.enableSelectedDates.call(this)):(this.multiDatesPicker.selectedDates.splice(r,1),e(".ui-datepicker-calendar").find('td[data-date="'+i.getDate()+'"]').removeClass("date-enabled"),d.removeDates.call(this,i,a),this.multiDatesPicker.enableButtonClicked&&d.enableSelectedDates.call(this));break;case"daysRange":this.multiDatesPicker.dates[a]=[];var l=this.multiDatesPicker.autoselectRange[1],c=this.multiDatesPicker.autoselectRange[0];if(l<c){var n=l;l=c,c=n}for(var u=c;u<l;u++)d.addDates.call(this,d.sumDays.call(this,t,u),a);break;default:!1===d.gotDate.call(this,t)?d.addDates.call(this,t,a):d.removeDates.call(this,t,a)}},setMode:function(t){switch(e(this),t.mode&&(this.multiDatesPicker.mode=t.mode),this.multiDatesPicker.mode){case"normal":for(var a in t)switch(a){case"maxPicks":case"minPicks":case"pickableRange":case"adjustRangeToDisabled":this.multiDatesPicker[a]=t[a]}break;case"daysRange":case"weeksRange":var i=1;for(a in t)switch(a){case"autoselectRange":i--;case"pickableRange":case"adjustRangeToDisabled":this.multiDatesPicker[a]=t[a]}i>0&&e.error("Some mandatory options not specified!")}s.onSelect&&s.onSelect()},destroy:function(){this.multiDatesPicker=null,e(this).datepicker("destroy")}};return this.each(function(){var s=e(this);if(this.multiDatesPicker||(this.multiDatesPicker={dates:{picked:[],disabled:[]},mode:"normal",adjustRangeToDisabled:!0}),this.multiDatesPicker){let r=this.multiDatesPicker;"enableSelectedDates"===r.mode&&r.showEnableResetBtns&&d.addControls.call(this)}if(d[t]){var l=d[t].apply(this,Array.prototype.slice.call(a,1));switch(t){case"removeDates":case"removeIndexes":case"resetDates":case"toggleDate":case"addDates":var c=s.datepicker("option","altField"),n=d.value.call(this);void 0!==c&&""!=c&&e(c).val(n),s.val(n),e.datepicker._refreshDatepicker(this)}switch(t){case"removeDates":case"getDates":case"gotDate":case"sumDays":case"compareDates":case"dateConvert":case"value":i=l}return l}return"object"!=typeof t&&t?e.error("Method "+t+" does not exist on jQuery.multiDatesPicker"):d.init.apply(this,a)}),i};var t=new Date().getTime();e.multiDatesPicker={version:!1},e.multiDatesPicker.initialized=!1,e.multiDatesPicker.uuid=new Date().getTime(),e.multiDatesPicker.version=e.ui.multiDatesPicker.version,e.multiDatesPicker._hideDatepicker=e.datepicker._hideDatepicker,e.datepicker._hideDatepicker=function(t){let a=this._curInst;if(a&&(!t||a===e.data(t,"datepicker"))){var i=this._curInst.input[0],s=i.multiDatesPicker;if(!s||!1===this._curInst.inline&&!s.changed)return e.multiDatesPicker._hideDatepicker.apply(this,arguments);s.changed=!1,e.datepicker._refreshDatepicker(i)}},window["DP_jQuery_"+t]=e});
